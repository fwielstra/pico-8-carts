pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
--squashy
--by cthulhu

function _init()
 score=0
 lives=3

 pad={
  x=52,
  y=122,
  w=24,
  h=4,
 }
 
 ball={
  x=64,
  y=64,
  size=3,
  xdir=5,
  ydir=-3
 }
end

function _update()
 move_paddle()
 bounce_ball()
 bounce_paddle()
 move_ball()
 lose_dead_ball()
end

function _draw()
 cls(3)
 
 for i=1,lives do
  spr(4,90+i*8,4)
 end
 print(score,12,6,15)
 
 rectfill(pad.x,pad.y,pad.x+pad.w,pad.y+pad.w,15)
 circfill(ball.x,ball.y,ball.size,15)
end

function move_paddle()
 if btn(0) then
  pad.x-=3
 elseif btn(1) then
  pad.x+=3
 end
end

function move_ball()
 ball.x+=ball.xdir
 ball.y+=ball.ydir
end

function lose_dead_ball()
 if ball.y > 128-ball.size then
  if lives > 0 then
   sfx(3)
   ball.y=24
   lives-=1
  else
   -- game over
   ball.ydir=0
   ball.xdir=0
   ball.x=64
   ball.y=64
   sfx(4)
  end
 end
end

function bounce_ball()
 --left or right
 if ball.x<ball.size or ball.x>128-ball.size then
  ball.xdir=-ball.xdir
  sfx(0)
 end
 
 --top
 if ball.y<ball.size then
   ball.ydir=-ball.ydir
   sfx(0)
 end
end

function bounce_paddle()
 if ball.x >= pad.x and
    ball.x <= pad.x+pad.w and
    ball.y > pad.y then
  sfx(0)
  score += 10
  ball.ydir =- ball.ydir
 end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000ff0ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000fffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000fffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000000000000000000000000000fffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000000000000000000000000000fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400003807000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000f00000c0500d0500e0500f050100501105012050130501405015050160501705018050190501a0501b0501c0501d0501e0501f0502005021050220502305024050260502705028050290502a0502b0502c050
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000600002007019070140700e0700c070080700407000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000002f0502d0502a05025050220501f0501b05013050130501305013050130500100001000010000100001000000000000000000000000000000000000000000000000000000000000000000000000000000
011000001207012060120501204012030120201201012000150701506015050150401503015020150100000018070180601805018040180301802018010000001207012060120501204012030120201201000000
__music__
00 01024344

